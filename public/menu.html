<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="./menu.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oleo+Script+Swash+Caps:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="alertBanner" class="hidden">

    </div>
    <nav>
        <div class="nav-contents">
            <div class="nav-logo">
                <h2>Davila Bakes</h2>

            </div>

            <div class="nav-links">
                <a href="./Index.html" id="home">Home</a>
                <a href="./menu.html" id="menu">Order</a>
                <a href="./About.html">About</a>
                <a href="./contact.html" id="contact">Contact</a>
            </div>

            <div class="nav-toggle">
                <button type="button" onclick="toggle()">☰</button>
            </div>
        </div>
    </nav>

    <section class="hero">
        <!-- <button class="btn-ord" onclick="document.querySelector('.form-container').scrollIntoView({behavior: 'smooth'});">
            Click to Order Now
        </button> -->
        <!-- <div class="container">
            <div class="slide" id="bottom">
        
                <div class="item">
                        <img class="it" src="./Screenshot 2025-03-10 185924.png" class="background-image">
                    <div class="content">
                        <div class="name">BUTTER <span class="break">BREAD</span></div>
                        <div class="des">You’re a beautiful <span class="break">person, inside and out</span></div>
                    </div>
                </div>
        
                <div class="item">
                        <img src="./Screenshot 2025-03-10 185954.png" class="background-image">
                    <div class="content up">
                        <div class="name">BURGER <span class="break">BREAD</span></div>
                        <div class="des">Superpowers - spreading <span class="break">smiles and being pretty</span></div>
                    </div>
                </div>
        
                <div class="item">
                        <img src="./Screenshot 2025-03-10 190034.png" class="background-image">
                    <div class="content">
                        <div class="name">CHOCOLATE <span class="break">BREAD</span></div>
                        <div class="des">Her Smile Cheers<span class="break"> me up instantly</span></div>
                    </div>
                </div>
        
                <div class="item">
                        <img src="./Screenshot 2025-03-10 195510.png" class="background-image">
                    <div class="content">
                        <div class="name">BANANA <span class="break">BREAD</span></div>
                        <div class="des">Just Sharing with<span class="break"> her makes you feel better</span></div>
                    </div>
                </div>
        
                <div class="item">
                        <img src="./Screenshot 2025-03-10 190034.png" class="background-image">
                    <div class="content">
                        <div class="name">SARDINE <span class="break">BREAD</span></div>
                        <div class="des">One of the Best <span class="break">Friends 2023 Gave me</span></div>
                    </div>
                </div>
        
                <div class="item">
                        <img src="./Screenshot 2025-03-10 185924.png" class="background-image">
                    <div class="content">
                        <div class="name">MASSIVE ENERGY&#x1F61D;</div>
                        <div class="des">Her vibe is <span class="break">Electric</span></div>
                    </div>
                </div>
        
            </div>
        
            <div class="button">
                <button class="prev"><i class="fa-solid fa-arrow-left"></i></button>
                <button class="next"><i class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>   -->
        
        <!-- <div class="form-container">
            <div class="logo">
                <img src="./images/round-icons-2kt2s_V1_Pc-unsplash.jpg" alt="">
                Davila Bakery
            </div>
            <form action="/submit" method="POST" onsubmit="return valid();">
                <p>Name</p>
                <input type="text" name="name" placeholder="Fullname" id="Fname">
                <span class="hide">Kindly enter full name</span>

                <p>Email</p>
                <input type="email" name="email" placeholder="example@gmail.com" id="email">
                <span class="hide">Please enter a valid email address</span>

                <p>Phone Number</p>
                <input type="tel" name="phone" id="phone" >
                <span class="hide">Please Enter a Valid phone number</span>

                <p>Subject</p>
                <input type="text" name="subject" placeholder="Subject" >

                <p>Message</p>
                <textarea name="message"></textarea>

                <button type="submit">Submit</button>
            </form> -->
        <div class="hero-content">
            <div class="left">
                <h1>PRODUCTS</h1>
                <div class="hero-grid">
                    <div class="select">
                        <img src="./images/brett-jordan-YyzYbcIw3VE-unsplash.jpg" id="butter"><br>
                        <button type="button" onclick="addToCart(`Butter Bread`, 6.50, 1, document.getElementById('butter'))">Add to Cart</button>
                        <span>Butter</span>
                        <p>Butter Bread</p>
                        <label>$ 6.50</label>
                    </div>
                    <div class="select">
                        <img src="./images/hans-vivek-mBu44hd3ea0-unsplash.jpg" id = "burger"><br>
                        <button type="button" onclick="addToCart(`Burger Bread`, 6.50, 1, document.getElementById('burger'))">Add to Cart</button>
                        <span>Burger</span>
                        <p>Burger Bread</p>
                        <label>$ 6.50</label>
                    </div>
                    <div class="select">
                        <img src="./images/rebecca-matthews-yjWNJRwt8mc-unsplash.jpg" id="sardine"><br>
                        <button type="button" onclick="addToCart(`Sardine Bread`, 6.50, 1, document.getElementById('sardine'))">Add to Cart</button>
                        <span>Sardine</span>
                        <p>Sardine Bread</p>
                        <label>$ 6.50</label>
                    </div>
                    <div class="select">
                        <img src="./images/vicky-nguyen-XDS-YmjUUvY-unsplash.jpg" id="choc"><br>
                        <button type="button" onclick="addToCart(`Chocolate Bread`, 6.50, 1, document.getElementById('choc'))">Add to Cart</button>
                        <span>Chocolate</span>
                        <p>Chocolate Bread</p>
                        <label>$ 6.50</label>
                    </div>
                    <div class="select">
                        <img src="./images/maria-orlova-kU7TkW9FIJY-unsplash.jpg" id="bannana"><br>
                        <button type="button" onclick="addToCart(`Bannana Bread`, 6.50, 1, document.getElementById('bannana'))">Add to Cart</button>
                        <span>Bannana</span>
                        <p>Bannana Bread</p>
                        <label>$ 6.50</label>
                    </div>
                </div>
            </div>

            <div class="cart" id="cart">
                <h1>CART</h1>
                <div id="total-items">Total Items: 0</div> <!-- Total items display -->
                
                    <div class="cart-content" id="cart-content">

                    </div>
                    <div id="total-price">Total Price: $0.00</div>
                    <div class="confirm">
                        <button id="confirm" onclick="showConfirm()">Confirm Order</button>
                    </div>
                
            </div>
        </div>

        <div class="confirm-order" id="confirm-order" style="display: none;">
            <div class="confirm-content" id="confirm-content">
                <button onclick="closeConfirm()" id="close">x</button>
                <h1>CONFIRM ORDER</h1>
                <div id="confirm-total-items">Total Items: 0</div> <!-- Total items display -->
                <div id="confirm-total-price">Total Price: $0.00</div> <!-- Total price display -->
            </div>
            <a href="./payment.html" id="paymentbtn">Go to payment</a>
        </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="link">
                <h2>Links</h2>
                <div class="footer-links">
                    <div class="three">
                        <a href="./Index.html">home</a>
                        <a href="./About.html">about</a>
                        <a onclick="document.querySelector('.form-container').scrollIntoView({behavior: 'smooth'});">Order</a>
                    </div>
                    <div class="two">
                        <a href="./contact.html">contact</a>
                        <a href="./About.html">team</a>
                    </div>
                </div>
            </div>
            <div class="socials">
                <h2>Socials</h2>
                <a href=""><i class="fa-brands fa-facebook"></i><label> Facebook</label></a><br>
                <a href=""><i class="fa-brands fa-instagram"></i><label> Instagram</label></a><br>
                <a href=""><i class="fa-brands fa-twitter"></i><label> Twitter</label></a>
            </div>
            <div class="footer-text">
                <h2>Satisfying Customers<br>Since 2023</h2>
            </div>

            <div class="footer-dist">
                <h2>For Distributors, click the link below<br><a onclick="document.querySelector('.form-container').scrollIntoView({behavior: 'smooth'});">Order Now</a></h2>
            </div>
        </div>
        <hr>
        <div class="ending">
            <div class="footer-comp">
                <label>Davila Bakes and Bakery<br><span>...a taste for more</label>
            </div>
            <div class="footer-copy">
                &copy; 2025 Davila Bakes and Bakery. All rights reserved.
            </div>
        </div>
        <hr>
    </footer>

    <script>
        // const fullName = localStorage.getItem("Fname");
        // const email = localStorage.getItem("mail");
        // const phone_no = localStorage.getItem("number");
        // const Address = localStorage.getItem("location");
        // window.alert(fullName);

        // restore cart or start fresh
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let totalQuantity = 0;
        let totalPrice    = 0;

        // helper to persist both cart and total price
        function persistCart() {
        localStorage.setItem("cart", JSON.stringify(cart));
        localStorage.setItem("totalPrice", totalPrice.toFixed(2));
        }

function showConfirm() {
    document.getElementById("confirm-order").style.display = "flex"; // Show the modal
}

function closeConfirm() {
    document.getElementById("confirm-order").style.display = "none"; // Hide the modal
}

function showAlert(duration = 3000){
    const banner = document.getElementById("alertBanner");
    banner.textContent = "ITEM ADDED TO CART";
    banner.classList.remove("hidden");

    setTimeout(()=>{
        banner.classList.add("hidden");
    }, duration)
}

function checkCart() {
    let cart = document.getElementById("cart-content");
    if (cart.innerHTML.trim() === "") {
        cart.innerHTML = `<div class="Empty-cart"><img src="./images/icons8-cart-32.png">NO ITEM IN CART</div>`;
        document.getElementById("confirm").classList.add("hide");
        document.getElementById("confirm").classList.remove("show");
        totalQuantity = 0; // Reset total quantity
        totalPrice = 0; // Reset total price
        updateTotalQuantityDisplay(); // Update the display
        updateTotalPriceDisplay(); // Update the display
    }
}

// Call the function on page load
document.addEventListener("DOMContentLoaded", checkCart);

function addToCart(item, price, number, image) {
    const location = document.getElementById("cart-content");
    const imagePath = image.src;
    showAlert()
    const section=document.getElementById("cart");
    section.scrollIntoView({behavior: "smooth"})

    if (location.innerHTML.includes("NO ITEM IN CART")) {
        location.innerHTML = "";
        document.getElementById("confirm").classList.add("show");
    }

    // Create a unique ID for the quantity display
    const quantityId = `quantity-${item.replace(/\s+/g, '-')}`; // Replace spaces with dashes for a valid ID
    const priceId = `price-${item.replace(/\s+/g, '-')}`; // Replace spaces with dashes for a valid ID
    const unitPrice = parseFloat(price);
    const itemId = `item-${item.replace(/\s+/g, '-')}`; // Unique ID for the item in the confirm order

    let confirmOrder = document.getElementById("confirm-content");
    const confirmContent = document.createElement("div");
    confirmContent.id = itemId; // Set the unique ID for the confirm order item

    confirmContent.innerHTML = `
        <div id="mine">
            <div class="cont" id="numberCont">
                <img src="${imagePath}">
            </div> 
            <div class="confirmNumber">
                <h2>${item}</h2>
                <span id="${quantityId}">Quantity: ${number}</span>
                <span id="${priceId}" data-unit-price="${unitPrice}">$${(unitPrice * number).toFixed(2)}</span>
            </div>
        </div>
        <hr>
    `;
    confirmOrder.appendChild(confirmContent);

    let create = document.createElement("div");
    create.innerHTML = `
        <div class="cont">
            <h2>${item}</h2>
            <span id="${priceId}" data-unit-price="${unitPrice}">$${(unitPrice * number).toFixed(2)}</span>
            <button onclick="removeItem('${itemId}', '${quantityId}', '${priceId}')">X</button>
        </div>
        <div class="number">
            <button onclick="updateQuantity('${quantityId}', -1, '${priceId}')">-</button>
            <span id="${quantityId}">${number}</span>
            <button onclick="updateQuantity('${quantityId}', 1, '${priceId}')">+</button>
            <span id="${priceId}">$${price}</span>
        </div>
        <hr>`;
    location.appendChild(create);

    // Update total quantity and total price
    totalQuantity += number;
    totalPrice += unitPrice * number;
    updateTotalQuantityDisplay();
    updateTotalPriceDisplay();
    
    // Update the confirmation order total display
    updateConfirmOrderTotal();

    // — NEW: sync to cart array —
    const idx = cart.findIndex(i => i.name === item);
    if (idx > -1) {
        cart[idx].quantity += number;
    } else {
        cart.push({ name: item, price: unitPrice, quantity: number });
    }

  persistCart();   // ← save updated cart + totalPrice
}

function updateConfirmOrderTotal() {
    const confirmOrderTotalItems = document.getElementById("confirm-total-items");
    const confirmOrderTotalPrice = document.getElementById("confirm-total-price");

    // Check if the elements exist, if not create them
    if (!confirmOrderTotalItems) {
        const confirmOrder = document.getElementById("confirm-order");
        const totalDiv = document.createElement("div");
        totalDiv.innerHTML = `
            <div id="confirm-total-items">Total Items: ${totalQuantity}</div>
            <div id="confirm-total-price">Total Price: $${totalPrice.toFixed(2)}</div>
        `;
        confirmOrder.appendChild(totalDiv);
    } else {
        confirmOrderTotalItems.innerText = `Total Items: ${totalQuantity}`;
        confirmOrderTotalPrice.innerText = `Total Price: $${totalPrice.toFixed(2)}`;
    }
}

function removeItem(itemId, quantityId, priceId) {
    const confirmOrderItem = document.getElementById(itemId);
    if (confirmOrderItem) {
        confirmOrderItem.remove(); // Remove from confirm order
    }

    const quantityElement = document.getElementById(quantityId);
    const priceElement = document.getElementById(priceId);
    let currentQuantity = parseInt(quantityElement.innerText);
    let unitPrice = parseFloat(priceElement.getAttribute("data-unit-price"));

    totalQuantity -= currentQuantity; // Subtract the quantity being removed
    totalPrice -= unitPrice * currentQuantity; // Subtract the total price of the item

    quantityElement.parentElement.parentElement.remove(); // Remove from cart
    checkCart(); // Check if the cart is empty
    updateTotalQuantityDisplay(); // Update the total quantity display
    updateTotalPriceDisplay(); // Update the total price display

    // Update the confirmation order total display
    updateConfirmOrderTotal();
    persistCart();
}

// function removeItem(itemId, quantityId, priceId) {
//     const confirmOrderItem = document.getElementById(itemId);
//     if (confirmOrderItem) {
//         confirmOrderItem.remove(); // Remove from confirm order
//     }

//     const quantityElement = document.getElementById(quantityId);
//     const priceElement = document.getElementById(priceId);
//     let currentQuantity = parseInt(quantityElement.innerText);
//     let unitPrice = parseFloat(priceElement.getAttribute("data-unit-price"));

//     totalQuantity -= currentQuantity; // Subtract the quantity being removed
//     totalPrice -= unitPrice * currentQuantity; // Subtract the total price of the item

//     quantityElement.parentElement.parentElement.remove(); // Remove from cart
//     checkCart(); // Check if the cart is empty
//     updateTotalQuantityDisplay(); // Update the total quantity display
//     updateTotalPriceDisplay(); // Update the total price display
// }

function updateQuantity(quantityId, change, priceId) {
    const quantityElement = document.getElementById(quantityId);
    const priceElement = document.getElementById(priceId);
    let currentQuantity = parseInt(quantityElement.innerText);
    let unitPrice = parseFloat(priceElement.getAttribute("data-unit-price"));

    // Update the quantity based on the change value
    currentQuantity += change;

    // Ensure quantity doesn't go below 1
    if (currentQuantity < 1) {
        removeItem(quantityId.replace('quantity-', 'item-'), quantityId, priceId); // Remove from both cart and confirm order
        checkCart();
    } else {
        // Update the displayed quantity
        quantityElement.innerText = currentQuantity;
        let latestPrice = (currentQuantity * unitPrice).toFixed(2);
        priceElement.innerText = `$${latestPrice}`;
        
        // Update total quantity and total price
        totalQuantity += change; // Update total quantity
        totalPrice += unitPrice * change; // Update total price

        // Update the corresponding quantity and price in the confirmation order overlay
        const confirmQuantityElement = document.querySelector(`#confirm-content #${quantityId}`);
        const confirmPriceElement = document.querySelector(`#confirm-content #${priceId}`);
        
        if (confirmQuantityElement) {
            confirmQuantityElement.innerText = `Quantity: ${currentQuantity}`;
        }
        if (confirmPriceElement) {
            confirmPriceElement.innerText = `$${latestPrice}`;
        }
    }

    // Update the total quantity and total price display
    updateTotalQuantityDisplay();
    updateTotalPriceDisplay();

    // Update the confirmation order total display
    updateConfirmOrderTotal();
    persistCart();
}

function updateTotalQuantityDisplay() {
    const totalItemsDisplay = document.getElementById("total-items");
    if (!totalItemsDisplay) {
        // Create the total items display if it doesn't exist
        const cart = document.getElementById("cart");
        const totalItemsDiv = document.createElement("div");
        totalItemsDiv.id = "total-items";
        totalItemsDiv.innerText = `Total Items: ${totalQuantity}`;
        cart.insertBefore(totalItemsDiv, document.getElementById("cart-content"));
    } else {
        totalItemsDisplay.innerHTML = `Total Items: <div>${totalQuantity}</div>`;
    }
}

function updateTotalPriceDisplay() {
    const totalPriceDisplay = document.getElementById("total-price");
    totalPriceDisplay.innerHTML = `Total Price: <div>$${totalPrice.toFixed(2)}<div>`;
        parseFloat(localStorage.setItem("savedPrice", totalPrice));
}

function toggle() {
    let navbar = document.querySelector(".nav-links");
    navbar.classList.toggle("nav-toggle");
}
    </script>
    
</body>
</html>